#!/usr/bin/env sh

##############################################################################
##
##  Gradle start up script for POSIX generated by Gradle.
##
##############################################################################

# Attempt to locate java, if JAVA_HOME is set use it otherwise assume java is on PATH
if [ -n "$JAVA_HOME" ] ; then
    JAVA_HOME_BIN="$JAVA_HOME/bin"
    JAVA_EXE="$JAVA_HOME_BIN/java"
    if [ ! -x "$JAVA_EXE" ] ; then
        echo "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME" >&2
        exit 1
    fi
else
    JAVA_EXE="java"
fi

# Determine the directory containing this script
APP_HOME=$( cd "$( dirname "$0" )" >/dev/null 2>&1 && pwd )

# Find the wrapper JAR
WRAPPER_JAR="$APP_HOME/gradle/wrapper/gradle-wrapper.jar"
if [ ! -f "$WRAPPER_JAR" ]; then
    echo "Downloading Gradle wrapper..."
    WRAPPER_URL="https://services.gradle.org/distributions/gradle-8.7-bin.zip"
    TMP_DIR="${TMPDIR:-/tmp}/gradle-wrapper-$$"
    mkdir -p "$TMP_DIR"
    curl -fsSL "$WRAPPER_URL" -o "$TMP_DIR/gradle-distribution.zip"
    unzip -p "$TMP_DIR/gradle-distribution.zip" gradle-8.7/lib/gradle-wrapper.jar > "$WRAPPER_JAR"
    rm -rf "$TMP_DIR"
fi

# Collect JVM options
DEFAULT_JVM_OPTS="-Xmx64m -Xms64m"
GRADLE_OPTS="$GRADLE_OPTS $DEFAULT_JVM_OPTS"

# Execute Gradle wrapper
exec "$JAVA_EXE" $GRADLE_OPTS \
    -Dorg.gradle.appname="gradlew" \
    -classpath "$WRAPPER_JAR" \
    org.gradle.wrapper.GradleWrapperMain "$@"
